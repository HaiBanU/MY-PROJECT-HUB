/* --- START OF FILE css/automation.css --- */

/* ==========================================================================
   AUTOMATION LIST VIEW - NEW LAYOUT
   ========================================================================== */
.automation-config-details {
    background-color: var(--card-background-color);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    margin-bottom: 2rem;
    transition: background-color 0.2s;
}
.automation-config-details[open] {
    background-color: var(--background-color);
}
.automation-config-summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 25px;
    cursor: pointer;
    list-style: none; /* Hide default arrow */
}
.automation-config-summary::-webkit-details-marker {
    display: none; /* Hide default arrow for Safari */
}
.automation-config-summary h3 {
    margin: 0;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    gap: 10px;
}
.summary-arrow {
    font-size: 14px;
    color: var(--text-light-color);
    transition: transform 0.3s;
}
.automation-config-details[open] > .automation-config-summary .summary-arrow {
    transform: rotate(180deg);
}
.automation-config-content {
    padding: 0px 25px 20px 25px;
    border-top: 1px solid var(--border-color);
}
.config-section h4 {
    margin: 20px 0 10px 0;
    display: flex;
    align-items: center;
    gap: 8px;
}
.config-section .form-help-text {
    font-size: 13px;
    margin-bottom: 15px;
    white-space: normal;
}
.connection-item { 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    padding: 12px; 
    background-color: var(--background-color); 
    border: 1px solid var(--border-color); 
    border-radius: 8px; 
    margin-bottom: 10px; 
}
.connection-info { display: flex; align-items: center; gap: 12px; }
.connection-info i { font-size: 18px; width: 20px; text-align: center; }
.connection-info i.fa-circle-check { color: var(--success-color); }
.connection-item .btn-sm { padding: 5px 12px; font-size: 14px; flex-shrink: 0;}

/* ==========================================================================
   AUTOMATION BUILDER
   ========================================================================== */
.automation-desc { color: var(--text-light-color); margin-bottom: 2rem; max-width: 700px; }
.automation-builder { display: flex; gap: 20px; height: 600px; }
.automation-nodes { flex-basis: 280px; padding: 20px; background: var(--card-background-color); border: 1px solid var(--border-color); border-radius: var(--border-radius); overflow-y: auto; }
.automation-nodes h4 { margin-bottom: 15px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
.automation-nodes .node { position: relative; padding: 12px 15px; background: var(--background-color); color: var(--text-color); margin-bottom: 10px; border-radius: var(--border-radius); cursor: grab; text-align: left; display: flex; align-items: center; gap: 10px; border: 1px solid var(--border-color); transition: all 0.2s; }
.automation-nodes .node:hover { background-color: var(--primary-color); color: white; border-color: var(--primary-color); transform: translateX(5px); }
.automation-nodes .node i { color: var(--primary-color); transition: color 0.2s; }
.automation-nodes .node:hover i { color: white; }
.automation-canvas { flex-grow: 1; background-color: var(--card-background-color); background-image: radial-gradient(var(--border-color) 1px, transparent 1px); background-size: 20px 20px; border: 1px dashed var(--border-color); border-radius: var(--border-radius); position: relative; padding: 20px; overflow: auto; }
.node-instance { position: absolute; background: var(--card-background-color); border: 1px solid var(--border-color); padding: 15px; border-radius: var(--border-radius); box-shadow: var(--shadow); cursor: move; display: flex; flex-direction: column; align-items: flex-start; gap: 5px; font-weight: 500; min-width: 220px; user-select: none; transition: box-shadow 0.3s, border-color 0.3s, transform 0.2s, background-color 0.3s; z-index: 10;}
.node-instance .delete-node-btn { position: absolute; top: 5px; right: 8px; font-size: 14px; background: none; border: none; color: var(--text-light-color); cursor: pointer; opacity: 0; transition: opacity 0.2s; padding: 5px; }
.node-instance:hover .delete-node-btn { opacity: 1; }
.delete-node-btn:hover { color: var(--error-color); }
.node-instance.running { border-color: var(--info-color); animation: node-running-glow 1.5s infinite ease-in-out; transform: scale(1.05); }
.node-instance.success { border-color: var(--success-color); background-color: #e8f8f2; }
body.dark-mode .node-instance.success { background-color: #1c3d31; }
.node-instance.error { border-color: var(--error-color); background-color: #fde8e8; }
body.dark-mode .node-instance.error { background-color: #492828; }
.node-instance .node-main-content { display: flex; align-items: center; gap: 10px; pointer-events: none; }
.node-instance.dragging { opacity: 0.8; z-index: 100; cursor: grabbing; }
.node-instance.trigger { border-left: 4px solid var(--secondary-color); }

.node-instance[data-type="ai-agent"] {
    border-left: 4px solid var(--accent-color);
}
.node-instance[data-type="ai-agent"] i {
    color: var(--accent-color);
}

.node-instance .node-info { font-size: 12px; color: var(--text-light-color); margin-top: 5px; font-weight: 400; width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.node-instance i { color: var(--primary-color); }
.handle { width: 14px; height: 14px; background-color: #fff; border: 2px solid var(--primary-color); border-radius: 50%; position: absolute; top: 50%; transform: translateY(-50%); cursor: crosshair; z-index: 20; transition: background-color 0.2s, transform 0.2s; }
.handle:hover { background-color: var(--primary-color); transform: translateY(-50%) scale(1.2); }
.handle-in { left: -8px; }
.handle-out { right: -8px; }
.node-instance.trigger .handle-in, .node-instance[data-type="manual"] .handle-in { display: none; }
.leader-line { z-index: 5; }

/* ==========================================================================
   MODAL CONFIGURATION STYLES
   ========================================================================== */
#action-config-content .form-group { margin-bottom: 20px; }
#action-config-content .form-actions { margin-top: 25px; }
.recipients-group { display: flex; flex-direction: column; }
.recipients-input-wrapper { display: flex; align-items: flex-start; gap: 10px; }
.recipients-input-wrapper textarea { flex-grow: 1; }
.recipients-group .file-input + .btn { margin-left: auto; }
.attachment-group { margin-top: 15px; }
#email-attachment-name { margin-left: 10px; color: var(--text-light-color); font-style: italic; }